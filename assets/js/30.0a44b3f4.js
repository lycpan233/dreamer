(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{390:function(t,a,v){"use strict";v.r(a);var _=v(0),r=Object(_.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"mysql-事务级别与特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql-事务级别与特性"}},[t._v("#")]),t._v(" Mysql 事务级别与特性")]),t._v(" "),a("blockquote",[a("p",[t._v("本文内容基于 Mysql 5.7 文档，不保证时效性...")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("隔离级别")]),t._v(" "),a("th",[t._v("能防止脏读")]),t._v(" "),a("th",[t._v("能防止不可重复读")]),t._v(" "),a("th",[t._v("能防止幻读")]),t._v(" "),a("th",[t._v("适用场景")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("READ UNCOMMITTED")]),t._v(" "),a("td",[t._v("❌")]),t._v(" "),a("td",[t._v("❌")]),t._v(" "),a("td",[t._v("❌")]),t._v(" "),a("td",[t._v("允许高并发，但数据不可靠（几乎不用）")])]),t._v(" "),a("tr",[a("td",[t._v("READ COMMITTED")]),t._v(" "),a("td",[t._v("✅")]),t._v(" "),a("td",[t._v("❌")]),t._v(" "),a("td",[t._v("❌")]),t._v(" "),a("td",[t._v("适用于大多数业务")])]),t._v(" "),a("tr",[a("td",[t._v("REPEATABLE READ")]),t._v(" "),a("td",[t._v("✅")]),t._v(" "),a("td",[t._v("✅")]),t._v(" "),a("td",[t._v("❌")]),t._v(" "),a("td",[t._v("InnoDB 默认，适合中等并发")])]),t._v(" "),a("tr",[a("td",[t._v("SERIALIZABLE")]),t._v(" "),a("td",[t._v("✅")]),t._v(" "),a("td",[t._v("✅")]),t._v(" "),a("td",[t._v("✅")]),t._v(" "),a("td",[t._v("严格数据一致性，但性能差")])])])]),t._v(" "),a("h2",{attrs:{id:"acid-模型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#acid-模型"}},[t._v("#")]),t._v(" ACID 模型")]),t._v(" "),a("p",[t._v("ACID 模型是一组数据库原则，它旨在保障事务的可靠性。")]),t._v(" "),a("p",[t._v("其中:")]),t._v(" "),a("ul",[a("li",[t._v("Atomicity（原子性），确保事务为原子操作，即要求事务要么全部执行成功，要么完全回滚。")]),t._v(" "),a("li",[t._v("Consistency（一致性），确保事务执行成功、失败，或执行中，不存在数据新旧值参半的情况。")]),t._v(" "),a("li",[t._v("Isolation（隔离性），确保事务之间互不干扰或查看到彼此未提交的数据。")]),t._v(" "),a("li",[t._v("Durability（持久性），确保事务执行成功后数据持久化到磁盘，不会受服务崩溃等情况影响。")])]),t._v(" "),a("h2",{attrs:{id:"脏读、幻读、不可重复读"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#脏读、幻读、不可重复读"}},[t._v("#")]),t._v(" 脏读、幻读、不可重复读")]),t._v(" "),a("h3",{attrs:{id:"脏读"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#脏读"}},[t._v("#")]),t._v(" 脏读")]),t._v(" "),a("p",[t._v("脏读是指在事务中会读取到其它事务未提交的数据。且当其它事务回滚以后，该数据就变成了脏数据，因此会导致，当前事务基于脏数据进行后续操作，从而使得整个数据不可信。")]),t._v(" "),a("h3",{attrs:{id:"幻读"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#幻读"}},[t._v("#")]),t._v(" 幻读")]),t._v(" "),a("p",[t._v("幻读是指在事务中一个查询语句运行多次，多次的返回的结果集不同（数量多/少了），通常是由 INSERT 引起的。")]),t._v(" "),a("h3",{attrs:{id:"不可重复读"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不可重复读"}},[t._v("#")]),t._v(" 不可重复读")]),t._v(" "),a("p",[t._v("不可重复读是在事务中前后两次查询的同一行数据内容不同，通常是由 UPDATE、DELETE 操作引起的。")]),t._v(" "),a("h2",{attrs:{id:"隔离级别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#隔离级别"}},[t._v("#")]),t._v(" 隔离级别")]),t._v(" "),a("h3",{attrs:{id:"repeatable-read"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#repeatable-read"}},[t._v("#")]),t._v(" REPEATABLE READ")]),t._v(" "),a("p",[t._v("可重复读级别，InnoDB 的默认级别。其确保在事务中，多次使用非 Lock SELECT 语句查询时，返回结果一致。")]),t._v(" "),a("p",[t._v("当前隔离级别下，一般不会出现幻读的情况，但使用 Lock SELECT 情况下，可能出现前后数据不一致的情况。")]),t._v(" "),a("h3",{attrs:{id:"read-committed"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#read-committed"}},[t._v("#")]),t._v(" READ COMMITTED")]),t._v(" "),a("p",[t._v("读已提交级别，实现在当前事务中，读取其它已经提交的事务。因此会产生幻读、不可重复读的问题。")]),t._v(" "),a("h3",{attrs:{id:"read-uncommitted"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#read-uncommitted"}},[t._v("#")]),t._v(" READ UNCOMMITTED")]),t._v(" "),a("p",[t._v("读未提交级别，在事务中可以读到其它事务未提交的数据，因此会产生脏读、不可重复读、幻读的问题。")]),t._v(" "),a("h3",{attrs:{id:"serializable"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#serializable"}},[t._v("#")]),t._v(" SERIALIZABLE")]),t._v(" "),a("p",[t._v("序列化级别，该级别基于 RR， 隐式的将 SELECT  语句转为 Lock 类型，从而避免幻读的问题。")]),t._v(" "),a("h2",{attrs:{id:"相关文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相关文档"}},[t._v("#")]),t._v(" 相关文档")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/innodb-transaction-model.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("innodb-transaction-model"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/glossary.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("glossary.html"),a("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=r.exports}}]);