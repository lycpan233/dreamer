(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{394:function(s,a,n){"use strict";n.r(a);var e=n(0),t=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"commitizen"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commitizen"}},[s._v("#")]),s._v(" Commitizen")]),s._v(" "),a("h3",{attrs:{id:"安装-commitizen-cli-工具包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-commitizen-cli-工具包"}},[s._v("#")]),s._v(" 安装 Commitizen CLI 工具包")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#npm")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" commitizen "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#pnpm")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("pnpm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" commitizen "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("注：在使用 pnpm 安装的时候，若拋错 ERR_PNPM_NO_GLOBAL_BIN_DIR  Unable to find the global bin directory")]),s._v(" "),a("h3",{attrs:{id:"在项目中初始化适配器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在项目中初始化适配器"}},[s._v("#")]),s._v(" 在项目中初始化适配器")]),s._v(" "),a("p",[s._v("这里选择的是 cz-conventional-changelog ，官方还提供了其它的，可以尝试一下差异")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# npm")]),s._v("\ncommitizen init cz-conventional-changelog --save-dev --save-exact\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yarn")]),s._v("\ncommitizen init cz-conventional-changelog "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--yarn")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--dev")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--exact")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pnpm")]),s._v("\ncommitizen init cz-conventional-changelog "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--pnpm")]),s._v(" --save-dev --save-exact\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"搭配-husky-使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搭配-husky-使用"}},[s._v("#")]),s._v(" 搭配 husky 使用")]),s._v(" "),a("p",[s._v("添加 prepare-commit-msg 钩子")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("npx husky "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" .husky/prepare-commit-msg  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'exec < /dev/tty && git cz --hook || true'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("注：原版 exec < /dev/tty && git cz --hook || true 中的 git cz是npx cz 这里我进行了替换，如果拋错，可以改为 npx cz 或者 cz")]),s._v(" "),a("h3",{attrs:{id:"使用方式与示例-commit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用方式与示例-commit"}},[s._v("#")]),s._v(" 使用方式与示例 commit")]),s._v(" "),a("p",[s._v("当时用 git commit 时触发 hook 进入交互页面，选择变更类型，补充变更内容。")]),s._v(" "),a("h3",{attrs:{id:"可选-交互-ui-支持中文"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#可选-交互-ui-支持中文"}},[s._v("#")]),s._v(" 可选：交互 UI 支持中文")]),s._v(" "),a("ol",[a("li",[s._v("安装适配器")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# npm")]),s._v("\ncommitizen init cz-customizable --save-dev --save-exact\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yarn")]),s._v("\ncommitizen init cz-customizable "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--yarn")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--dev")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--exact")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pnpm")]),s._v("\ncommitizen init cz-customizable "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--pnpm")]),s._v(" --save-dev --save-exact\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("注： 如果已经按照上面的命令装过 cz-conventional-changelog ，需要加 --force 参数，或者把 cz-conventional-changelog 从项目里删除")]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("配置 config")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('# package.json\n\n"config": {\n    "commitizen": {\n      "path": "./node_modules/cz-customizable"\n    }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("重新定义交互信息")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("// .cz-config.js\n\nmodule.exports = {\n    // type 类型\n    types: [\n        { value: 'feat', name: 'feat:     引入新功能' },\n        { value: 'fix', name: 'fix:      修复 bug' },\n        { value: 'style', name: 'style:    更新 UI 样式文按键' },\n        { value: 'format', name: 'format:   格式化代码' },\n        { value: 'docs', name: 'docs:     添加/更新文档' },\n        { value: 'perf', name: 'perf:     提高性能/优化' },\n        { value: 'init', name: 'init:     初次提交/初始化项目' },\n        { value: 'test', name: 'test:     增加测试代码' },\n        { value: 'refactor', name: 'refactor: 改进代码结构/代码格式' },\n        { value: 'patch', name: 'patch:    添加重要补丁' },\n        { value: 'file', name: 'file:     添加新文件' },\n        { value: 'publish', name: 'publish:  发布新版本' },\n        { value: 'tag', name: 'tag:      发布新版本' },\n        { value: 'config', name: 'config:   修改配置文件' },\n        { value: 'git', name: 'git:      添加或修改.gitignore 文件' }\n    ],\n\n    // allowTicketNumber: false,\n    // isTicketNumberRequired: false,git\n    // ticketNumberPrefix: 'TICKET-',\n    // ticketNumberRegExp: '\\\\d{1,5}',\n\n    // 可以设置 scope 的类型跟 type 的类型匹配项，例如: 'fix'\n    // scopeOverrides: {\n    //   config: [\n    //     { name: 'merge' },\n    //     { name: 'style' },\n    //     { name: 'e2eTest' },\n    //     { name: 'unitTest' }\n    //   ]\n    // },\n    // 覆写提示的信息\n    messages: {\n        type: \"选择你要提交的类型:\",\n        // scope: '\\n选择一个 scope (可选):',\n        // 选择 scope: custom 时会出下面的提示\n        // customScope: '请输入自定义的 scope (可选):',\n        subject: '填写一个简短精炼的描述语句 (必填):\\n',\n        body: '添加一个更加详细的描述，可以附上新增功能的描述或 bug 链接、截图链接 (可选)。使用 \"|\" 换行:\\n',\n        breaking: '列举非兼容性重大的变更 (可选):\\n',\n        footer: '列举出所有变更的 ISSUES CLOSED (可选)。 例如.: #31, #34:\\n',\n        confirmCommit: '确认提交?（y/n）',\n    },\n\n    // 是否允许自定义填写 scope ，设置为 true ，会自动添加两个 scope 类型 [{ name: 'empty', value: false },{ name: 'custom', value: 'custom' }]\n    allowCustomScopes: false,\n    allowBreakingChanges: ['feat', 'fix'],\n    // 跳过问题\n    // skipQuestions: ['body', 'footer'],\n\n    // subject 限制长度\n    subjectLimit: 100,\n    // breaklineChar: '|', // 支持 body 和 footer\n    // footerPrefix : 'ISSUES CLOSED:'\n    // askForBreakingChangeFirst : true,\n};\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br")])]),a("p",[s._v("注：该文件支持放在其它地方，但是需要重命名。配置依赖。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('// package.json\n\n"config": {\n    "commitizen": {\n      "path": "./node_modules/cz-customizable"\n    },\n    "cz-customizable": {\n      "config": ".husky/git/commitizen.js" // 新路径\n    }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("参考文档与项目")])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/leoforfree/cz-customizable",target:"_blank",rel:"noopener noreferrer"}},[s._v("leoforfree/cz-customizable"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/LeadrateMSK/nuxt3-starter/blob/master/package.json",target:"_blank",rel:"noopener noreferrer"}},[s._v("LeadrateMSK/nuxt3-starter"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"commitlint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commitlint"}},[s._v("#")]),s._v(" Commitlint")]),s._v(" "),a("h3",{attrs:{id:"安装依赖包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖包"}},[s._v("#")]),s._v(" 安装依赖包")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 安装 commitlint cli and conventional config\nnpm install --save-dev @commitlint/{config-conventional,cli}\n\n# pnpm\npnpm install --save-dev @commitlint/{config-conventional,cli}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"配置依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置依赖"}},[s._v("#")]),s._v(" 配置依赖")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加 commitlint 配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"'use strict'; module.exports = { extends: [ '@commitlint/config-conventional' ] };\"")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" commitlint.config.js\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("注: 若 eslint 报错，可以添加 'use strict'; 另外其支持单独配置。使用方法可以参照该项目。\n"),a("a",{attrs:{href:"https://github.com/LeadrateMSK/nuxt3-starter/blob/6c4d59a711030db7ead0c27002d8960557f2779e/.husky/git/commitlint.js#L4",target:"_blank",rel:"noopener noreferrer"}},[s._v("LeadrateMSK/nuxt3-starter"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"撘配-husky-使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#撘配-husky-使用"}},[s._v("#")]),s._v(" 撘配 husky 使用")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("npx husky "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" .husky/commit-msg  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'npx --no -- commitlint --edit ${1}'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"相关文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相关文档"}},[s._v("#")]),s._v(" 相关文档")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.conventionalcommits.org/zh-hans/v1.0.0/",target:"_blank",rel:"noopener noreferrer"}},[s._v("约定式提交 (conventionalcommits.org)"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://ruanyifeng.com/blog/2016/01/commit_message_change_log.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Commit message 和 Change log 编写指南 - 阮一峰的网络日志 (ruanyifeng.com)"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/eggjs/egg/blob/master/CONTRIBUTING.zh-CN.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("egg/CONTRIBUTING.zh-CN.md at master · eggjs/egg (github.com)"),a("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=t.exports}}]);